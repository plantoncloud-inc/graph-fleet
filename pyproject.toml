[project]
name = "graph-fleet"
version = "0.0.1"
description = "Resolve cloud resource identities (IDs, ARNs, names) from natural language."
authors = [{ name = "Planton Cloud" }]
license = { text = "MIT" }
requires-python = ">=3.11,<4.0"

[tool.poetry.dependencies]
langgraph = "0.6.6"
langgraph-cli = { version = "0.4.0", extras = ["inmem"] }
langchain-openai = "0.3.32"
langchain-anthropic = "0.3.19"
python-dotenv = "1.0.1"
pyyaml = "6.0.2"
deepagents = "^0.0.5"  # Core framework for autonomous agents
langchain-mcp-adapters = "^0.1.9"  # LangChain MCP integration for tools
mcp = "^1.0.0"  # Model Context Protocol library
# ECS Deep Agent dependencies
click = "^8.0.0"  # CLI interface for ECS agent
aiofiles = "^24.0.0"  # Async file operations
pydantic = "^2.0.0"  # Data validation and settings management
# Packages from requirements_buf.txt with custom source
# https://buf.build/blintora/apis/sdks/v0.2.313-2-beta:protocolbuffers/python?version=v32.0
blintora-apis-protocolbuffers-python = { version = "==32.0.0.1.dev+6f15602dc75b", source = "buf-build" }
# https://buf.build/blintora/apis/sdks/v0.2.313-2-beta:protocolbuffers/pyi?version=v32.0
blintora-apis-protocolbuffers-pyi = { version = "==32.0.0.1.dev+6f15602dc75b", source = "buf-build" }
# https://buf.build/blintora/apis/sdks/v0.2.313-2-beta:grpc/python?version=v1.74.1
blintora-apis-grpc-python = { version = "==1.74.1.1.dev+6f15602dc75b", source = "buf-build" }
awslabs-aws-api-mcp-server = "^0.2.11"

[tool.poetry.extras]
mcp = ["langchain-mcp-adapters"]

[tool.poetry.scripts]
planton-cloud-mcp-server = "mcp.planton_cloud.entry_point:main"
ecs-agent = "agents.ecs_deep_agent.main:cli"

[build-system]
requires = ["setuptools>=73.0.0", "wheel"]
build-backend = "setuptools.build_meta"

[tool.poetry]
packages = [
  { include = "agents", from = "src" },
  { include = "mcp", from = "src" }
]

[tool.setuptools.packages.find]
where = ["src"]
include = ["agents*", "mcp*"]

[tool.setuptools.package-dir]
"" = "src"


[[tool.poetry.source]]
name = "buf-build"
url = "https://buf.build/gen/python"
priority = "supplemental"

# Poetry dev group: these will NOT be installed in your LangGraph runtime
# (the cloud builder uses pip over [project], not Poetry groups).
[tool.poetry.group.dev.dependencies]
ruff = ">=0.6.0"
mypy = ">=1.10.0"

[tool.ruff]
lint.select = ["E", "F", "I", "D", "UP"]
lint.ignore = ["D401", "D417", "E501"]
