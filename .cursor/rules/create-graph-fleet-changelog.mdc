---
description: Action rule to create a well-structured changelog document capturing meaningful engineering work, sized proportionally to the feature's impact and complexity.
globs: []
alwaysApply: false
---

# Rule: Create Changelog (action)

Purpose: When invoked, create a comprehensive changelog document in the `changelog/` directory that captures the essence, context, and impact of recent engineering work. The changelog should be meaningful, well-structured, and appropriately sized based on the scope and impact of the change.

Usage: Invoke explicitly as `@create-changelog` after completing meaningful work in a conversation.

References: existing changelogs in `changelog/`

## ⚠️ CRITICAL: Explicit Invocation Only

**DO NOT** create a changelog automatically or proactively. Changelogs must ONLY be created when the user explicitly invokes this rule with `@create-changelog`.

Never:
- ❌ Suggest creating a changelog without being asked
- ❌ Create a changelog at the end of a conversation automatically
- ❌ Assume the user wants a changelog created
- ❌ Create a changelog "to be helpful" without explicit request

Always:
- ✅ Wait for explicit `@create-changelog` invocation
- ✅ Confirm the request before creating the file
- ✅ Let the user decide when/if a changelog is needed

**This is a user-controlled action, not an automatic process.**

## When to Create a Changelog

Create a changelog when:
- ✅ You've completed a meaningful feature, refactoring, or improvement
- ✅ The work involved multiple files or system components
- ✅ The change introduces new patterns or architectural decisions
- ✅ The work took significant time/effort (typically 1+ hours)
- ✅ The change has notable impact on the product, team, or users
- ✅ You want to preserve the context and rationale for future reference

**Skip changelogs for**:
- ✋ Trivial bug fixes or typo corrections
- ✋ Minor configuration tweaks
- ✋ Work-in-progress or incomplete changes
- ✋ Changes already well-documented in PR descriptions

## Sizing Guidance: Use Your Judgment

**Critical principle**: The changelog length should be **proportional to the feature's complexity and impact**, not artificially constrained or inflated.

### Small Changes (150-300 lines)
- Single agent or component updates
- Focused bug fixes with clear before/after
- Minor tool additions
- Configuration improvements

**Example**: Agent error handling enhancement - straightforward problem, clear solution, limited scope

### Medium Changes (300-600 lines)
- Multi-agent refactorings
- New framework patterns
- Integration work across 2-3 components
- MCP server additions

**Example**: New LangGraph middleware pattern - new pattern, multiple agents, clear architecture

### Large Changes (600-1000+ lines)
- Major architectural shifts
- Framework migrations
- Comprehensive feature rollouts across many agents
- System-wide refactorings with broad impact

**Example**: Deep Agents integration, Multi-agent orchestration system, New agent type implementation

**Golden rule**: If you're unsure, start shorter and add detail only where it adds real value. Quality over quantity.

## Changelog Structure

### File Naming
```
YYYY-MM-DD-brief-descriptive-slug.md
```

Examples:
- `2025-10-27-rds-manifest-generator-agent.md`
- `2025-10-26-langgraph-studio-integration.md`
- `2025-10-25-mcp-planton-cloud-server.md`

Use current date and a clear, kebab-case slug describing the change.

### Required Sections

Every changelog should include:

```markdown
# [Clear, Descriptive Title]

**Date**: [Month Day, Year]

## Summary

[2-4 sentence overview of what was accomplished and why it matters]

## Problem Statement

[Describe the problem or need that motivated this work]

### Pain Points

[Bullet list of specific issues being addressed]

## Solution

[High-level description of the approach taken]

### [Architecture/Key Components]

[Visual diagrams, component descriptions as needed]

## Implementation Details

[Technical specifics - code changes, new patterns, key decisions]

## Benefits

[Concrete improvements - metrics, time savings, developer experience]

## Impact

[Who/what is affected and how]

## Related Work

[Connect to other changelogs, features, or initiatives]

---

**Status**: ✅ [Production Ready | In Progress | Experimental]
**Timeline**: [Duration if relevant]
```

### Optional Sections (Include When Valuable)

Add these sections only when they provide meaningful value:

- **Breaking Changes**: When APIs or contracts change
- **Migration Guide**: When users need to adapt
- **Testing Strategy**: For complex features requiring verification
- **Performance Characteristics**: When performance is a key concern
- **Known Limitations**: For incomplete implementations
- **Future Enhancements**: For planned follow-up work
- **Code Metrics**: Statistics that tell a story (files changed, reduction %, etc.)
- **Design Decisions**: When trade-offs were significant
- **Examples/Usage**: When it helps understanding

## Writing Guidelines

### Do:
- ✅ **Start with context**: Why did this work happen?
- ✅ **Focus on value**: What problem does this solve?
- ✅ **Use concrete examples**: Show before/after code, commands, outputs
- ✅ **Include numbers**: Metrics, timelines, file counts (when meaningful)
- ✅ **Explain decisions**: Why this approach vs alternatives?
- ✅ **Write for future you**: Capture the thinking, not just the what
- ✅ **Link to related work**: Connect the dots with other changes
- ✅ **Use formatting**: Code blocks, tables, bullet lists for readability

### Don't:
- ❌ **Over-explain the obvious**: Assume the reader is technical
- ❌ **Include every detail**: Focus on what matters
- ❌ **Write generic summaries**: Be specific to your system
- ❌ **Skip the "why"**: Context is critical for future understanding
- ❌ **Ignore trade-offs**: Document decisions and their rationale
- ❌ **Use jargon without context**: Define terms that may be unclear

## Tone and Style

- **Informative, not promotional**: Focus on facts and impact
- **Technical but accessible**: Balance depth with clarity
- **Professional but human**: You can say "we struggled with X" or "this was tricky"
- **Present tense for descriptions**: "The system now does X"
- **Past tense for actions**: "We implemented Y"

## Quality Checklist

Before finalizing a changelog:

- [ ] Title clearly describes the change
- [ ] Summary captures essence in 2-4 sentences
- [ ] Problem statement explains why work was needed
- [ ] Solution section describes the approach
- [ ] Implementation details are technical but focused
- [ ] Benefits are concrete and measurable
- [ ] Code examples (if any) are actual code, not pseudocode
- [ ] Related work connects this to other changes
- [ ] Length is proportional to scope and impact
- [ ] No sensitive information (credentials, private URLs, etc.)

## Proportionality Examples

### ✅ Good: Appropriately Sized

**Small feature** (200 lines): 
- Problem: 1 paragraph
- Solution: 1-2 paragraphs + key code snippet
- Benefits: 3-5 bullets
- Impact: 1 paragraph

**Medium feature** (500 lines):
- Problem: 2-3 paragraphs with pain points
- Solution: Architecture diagram + component descriptions
- Implementation: 3-4 key changes with examples
- Benefits: Categorized list with metrics
- Impact: Developer experience + system improvements

**Large feature** (900 lines):
- Problem: Comprehensive context with examples
- Solution: Full architecture with diagrams and phases
- Implementation: Detailed technical sections per component
- Benefits: Quantitative and qualitative analysis
- Testing: Strategy and verification steps
- Impact: Multi-dimensional (devs, users, operations)

### ❌ Anti-patterns

- **Over-detailed small change**: 800-line changelog for a 50-line fix
- **Under-documented major change**: 150-line changelog for major agent refactor
- **Kitchen sink**: Including every file touched, every line changed
- **Too abstract**: Generic descriptions without concrete examples

## Automation Notes

When creating the changelog:
1. **Analyze the conversation**: Extract key decisions, changes, outcomes
2. **Assess scope**: Count files, agents, components affected
3. **Determine sections**: Include only relevant sections
4. **Size appropriately**: Match detail level to impact
5. **Write the file**: Create in `changelog/` with proper naming
6. **Confirm creation**: Provide file path and next steps

## Example Invocations

```
"We just completed the RDS manifest generator agent. @create-changelog"

"I've finished implementing the Deep Agents integration across the fleet. 
@create-changelog - this was a major change"

"The MCP Planton Cloud server is done. @create-changelog - include the 
tool filtering and async handling improvements"
```

## Remember

**Changelogs are living documentation** that helps future developers (including you) understand:
- What changed
- Why it changed
- How it was implemented
- What the impact was

Write for the person who will debug this at 2am in six months. Give them the context they need - no more, no less.

**When in doubt**: Start with the required sections, keep it focused, and add detail only where it truly helps understanding. A clear, concise 300-line changelog is better than a rambling 1000-line document.

---

*"Documentation is a love letter to your future self."* - Damian Conway
